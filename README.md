### Introduction 
* A write up on Task 24, the final exam within the free CC: Pentesting room on [Try Hack Me](https://tryhackme.com/)
* The room itself covers a range of penetration testing subjects and tools. 
* This is the process I took to complete Task 24
* [CC: Pen Testing room](https://www.tryhackme.com/room/ccpentesting)

### Plan of attack 
* Follow the penetration testing methodology (simplified in this case)

1. Information gathering and scanning to find vulnerabilities 
* Network and OS fingerprinting `nmap` "Network Mapper"
* Web application vulnuerability scanner: `nikto`
* Website enumeration: `gobuster` 
* Common CVE exploits database searcher: `searchsploit` (use once services are known)

2. Gaining access by exploiting vulnerabilities (any of the following may or may not be used)
* Cracking windows shares with smbclient: `smbclient`
* SQLi exploits: `sqlmap`
* Metasploit: `msfconsole` (framework for deploying exploits and more)
* johnthe ripper hash cracker: `john`
* [Web based hash cracker crack station](https://crackstation.net/)

### Solving for question: "What is the user.txt"
* Service scan on all ports, in conjuction with an aggressive OS scan
* `sudo nmap -sV --version-all -O --osscan-guess 10.10.160.122 -oN sercivesAndOs`
* There's an Ubuntu Apache Web Server on port 80 and ssh on the default port 22 
* As of today, 09/03/2021, the most stable release of the Apache HTTP Server is 2.4.46
* 2.4.18 may have some vulnerabilities

![image](https://user-images.githubusercontent.com/77082071/110837431-352c2b80-826f-11eb-8d45-f92a79a3cb56.png)

Checked to see whether the machine is live on a web server

![image](https://user-images.githubusercontent.com/77082071/110522165-85d54480-8108-11eb-9cdd-f8cf7f5a739c.png)

Some reconnaisance with nikto
* `nikto -host http://10.10.160.122 -output niktoReconaissance.txt`

![image](https://user-images.githubusercontent.com/77082071/110522206-91c10680-8108-11eb-879d-cf27dc7d0f85.png)

* Scan confirms the Ubuntu Apache server found with nmap and states that the server is also outdated
* Permitted 
* Navigated to the `/secret` folder where there is no output displayed. Nothing interesting in the source code either.

![image](https://user-images.githubusercontent.com/77082071/110522302-a8fff400-8108-11eb-9319-f2d63a450201.png)

* Since GET requests are permitted, used curl to make a GET request to the /secret folder
* `curl http://10.10.160.122/secret > curlGetRequest.txt`
* Output states the document was permanently moved to "here". Could be anywhere

![image](https://user-images.githubusercontent.com/77082071/110522344-b2895c00-8108-11eb-85ad-3373090cfeb9.png)

* Running stealth port scanner on a default subnet mask /24 to discover any servi
* `sudo nmap -sn 10.10.160.122/24 > hostDiscovery.txt`
* Discovered hosts with final ip octet values of: `98, 102, 122, 251`
* To be investigated later. 

![image](https://user-images.githubusercontent.com/77082071/110522370-ba490080-8108-11eb-94c9-0c98f86c8826.png)

Enumerated the original machine `10.10.160.122` in order to find .txt file extensions, if any, in the /secret folder  
* Used 40 threads in quiet mode
* `gobuster dir -u http://10.10.160.122/secret -w /usr/share/wordlists/dirb/common.txt -x .txt -q -t 40 > bruteForceEnumeration.txt`
* Got some 403 status codes, indicating the server refused to authorise the requests. 
* Received a 200 tatus code for /secret.txt
* Navigated to /secret.txt 

![image](https://user-images.githubusercontent.com/77082071/110522414-c765ef80-8108-11eb-8745-183e9c366c67.png)

![image](https://user-images.githubusercontent.com/77082071/110522448-d0ef5780-8108-11eb-861f-a4ac1ece75a0.png)

```
NOTE: Had to relaunch a new machine with a new IP: `10.10.9.62` because the 1 hour time limit was over 
``` 

* Used curl to save the credentials
* `curl http://10.10.9.62/secret/secret.txt > userCredentials.txt`
* Found out the type of hash id 
* `hashid -m 046385855FC9580393853D8E81F240B66FE9A7B8`
* Most Likely a SHA-1 hash 

![image](https://user-images.githubusercontent.com/77082071/110522502-dea4dd00-8108-11eb-8ff4-f1c93e20426c.png)

* Used [crackstation](https://crackstation.net/) to crack the sha1 hash, output: `nyan`

![image](https://user-images.githubusercontent.com/77082071/110522533-e8c6db80-8108-11eb-8827-1f6bddeae414.png)

Having identified SSH running on port 22, attempted to login into the machine with given credentials
* First challenge solved!

![image](https://user-images.githubusercontent.com/77082071/110522572-f2504380-8108-11eb-97a2-65aa2840bb5d.png)

### Solving for root.txt 
*Still logged into the machine via SSH 
* Ffound a directory /root with: `locate /root` and didn't have permissions to change into that directory `cd /root`
* Checked sudo permissions: `sudo -l` and noticed privilege can be escalated with `sudo su`
* Cat the root.txt file and voil√† `congratulations!!!!`

![image](https://user-images.githubusercontent.com/77082071/110522619-fd0ad880-8108-11eb-8547-bae4f5872a9d.png)


### Useful Links
1. [Gobuster](https://tools.kali.org/web-applications/gobuster)
