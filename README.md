# CC-Pentesting : Task 24 : Section 7 : Final Exam

### Introduction 
* A write up on Task 24, the final exam within the free CC: Pentesting room on Try hack me that covers a range of penetration testing subjects and tools. 
* This is the process I took to complete the exam 
* [CC: Pen Testing room](https://www.tryhackme.com/room/ccpentesting)

### Plan of attack 
* Follow the penetration testing methodology (simplified in this case)

1. Information gathering and scanning to find vulnerabilities 
* Network and OS fingerprinting `nmap` "Network Mapper"
* Web application vulnuerability scanner: `nikto`
* Website enumeration: `gobuster` 
* Common CVE exploits database searcher: `searchsploit` (use once services are known)

2. Gaining access by exploiting vulnerabilities (any of the following may or may not be used)
* Cracking windows shares with smbclient: `smbclient`
* SQLi exploits: `sqlmap`
* Metasploit: `msfconsole` (framework for deploying exploits and more)
* johnthe ripper hash cracker: `john`
* [Web based hash cracker crack station](https://crackstation.net/)

### Solving for question: "What is the user.txt"
* Service scan on all ports, in conjuction with an aggressive OS scan
* `sudo nmap -sV --version-all -O --osscan-guess 10.10.160.122 -oN sercivesAndOs`
* There's an Ubuntu Apache Web Server on port 80 and ssh on the default port 22 
* As of today, 09/03/2021, the most stable release of the Apache HTTP Server is 2.4.46
* 2.4.18 may have some vulnerabilities

Checked to see whether the machine is live on a web server

Some reconnaisance with nikto
* `nikto -host http://10.10.160.122 -output niktoReconaissance.txt`

niktoScan.png

* Scan confirms the Ubuntu Apache server found with nmap and states that the server is also outdated
* Permitted 
* Navigated to the `/secret` folder where there is no output displayed. Nothing interesting in the source code either.

secretFolderInBrowser.png

* Since GET requests are permitted, used curl to make a GET request to the /secret folder
* `curl http://10.10.160.122/secret > curlGetRequest.txt`
* Output states the document was permanently moved to "here". Could be anywhere

curlGetResponse.png 

* Running stealth port scanner on a default subnet mask /24 to discover any servi
* `sudo nmap -sn 10.10.160.122/24 > hostDiscovery.txt`
* Discovered hosts with final ip octet values of: `98, 102, 122, 251`
* To be investigated later. 

discoveredHosts.png 

Enumerated the original machine `10.10.160.122` in order to find .txt file extensions, if any, in the /secret folder  
* Used 40 threads in quiet mode
* `gobuster dir -u http://10.10.160.122/secret -w /usr/share/wordlists/dirb/common.txt -x .txt -q -t 40 > bruteForceEnumeration.txt`
* Got some 403 status codes, indicating the server refused to authorise the requests. 
* Received a 200 tatus code for /secret.txt
* Navigated to /secret.txt 
 
gobuster1.png 

secretTXT.png

```
NOTE: Had to relaunch a new machine with a new IP: `10.10.9.62` because the 1 hour time limit was over 
``` 

* Used curl to save the credentials
* `curl http://10.10.9.62/secret/secret.txt > userCredentials.txt`
* Found out the type of hash id 
* `hashid -m 046385855FC9580393853D8E81F240B66FE9A7B8`
* Most Likely a SHA-1 hash 

hashType.png

* Used [crackstation](https://crackstation.net/) to crack the sha1 hash, output: `nyan`

crackedHash 

Having identified SSH running on port 22, attempted to login into the machine with given credentials
* First challenge solved!

userTextSolved

### Solving for root.txt 
*Still logged into the machine via SSH 
* Ffound a directory /root with: `locate /root` and didn't have permissions to change into that directory `cd /root`
* Checked sudo permissions: `sudo -l` and noticed privilege can be escalated with `sudo su`
* Cat the root.txt file and voil√† `congratulations!!!!`

permissionDenied.png 

### Useful Links
1. [Gobuster](https://tools.kali.org/web-applications/gobuster)


